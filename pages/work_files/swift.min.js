(function(d){function g(a){this.size=0;this.limit=a;this._keymap={}}var p=function(a){var b,c={};if(""===a)return{};for(b=0;b<a.length;b+=1){var d=a[b].split("\x3d");2===d.length&&(c[d[0]]=decodeURIComponent(d[1].replace(/\+/g," ")))}return c};d.queryParams=function(){return p(window.location.search.substr(1).split("\x26"))};d.hashParams=function(){return p(window.location.hash.substr(1).split("\x26"))};var q=0;window.Swiftype=window.Swiftype||{};Swiftype.root_url=Swiftype.root_url||"https://api.swiftype.com";
Swiftype.pingUrl=function(a,b){var c=setTimeout(b,350),d=new Image;d.onload=d.onerror=function(){clearTimeout(c);b()};d.src=a;return!1};Swiftype.pingAutoSelection=function(a,b,c,e){a={t:(new Date).getTime(),engine_key:a,doc_id:b,prefix:c};a=Swiftype.root_url+"/api/v1/public/analytics/pas?"+d.param(a);Swiftype.pingUrl(a,e)};Swiftype.findSelectedSection=function(){function a(a){a=a.replace(/\s+/g,"");return a=a.toLowerCase()}var b=d.hashParams().sts;b&&(b=a(b),d("h1, h2, h3, h4, h5, h6").each(function(c){$this=
d(this);if(0<=a($this.text()).indexOf(b))return this.scrollIntoView(!0),!1}))};Swiftype.htmlEscape=Swiftype.htmlEscape||function(a){return String(a).replace(/&/g,"\x26amp;").replace(/"/g,"\x26quot;").replace(/'/g,"\x26#39;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;")};d.fn.swiftype=function(a){Swiftype.findSelectedSection();a=d.extend({},d.fn.swiftype.defaults,a);return this.each(function(){var b=d(this),c=d.meta?d.extend({},a,b.data()):a;b.attr("autocomplete","off");b.data("swiftype-config-autocomplete",
c);b.submitted=!1;b.cache=new g(10);b.emptyQueries=[];b.isEmpty=function(a){return 0<=d.inArray(d.trim(a).toLowerCase(),this.emptyQueries)};b.addEmpty=function(a){b.emptyQueries.unshift(d.trim(a).toLowerCase())};var e=c.dropdownStylesFunction(b),r=d('\x3cdiv class\x3d"'+c.widgetContainerClass+'" /\x3e'),k=d("\x3cdiv /\x3e").addClass(c.suggestionListClass).appendTo(r).css(e).hide();r.appendTo(c.autocompleteContainingElement);var h=d("\x3c"+c.suggestionListType+" /\x3e").appendTo(k);b.data("swiftype-list",
h);b.abortCurrent=function(){b.currentRequest&&b.currentRequest.abort()};b.showList=function(){!1===f(c.disableAutocomplete)&&k.show()};b.hideList=function(a){a?k.hide():setTimeout(function(){k.hide()},10)};b.showNoResults=function(){h.empty();void 0===c.noResultsMessage?b.hideList():(h.append(d("\x3cli /\x3e",{"class":c.noResultsClass}).text(c.noResultsMessage)),b.showList())};b.focused=function(){return b.is(":focus")};b.submitting=function(){b.submitted=!0};b.listResults=function(){return d(c.resultListSelector,
h).filter(":not(."+c.noResultsClass+")")};b.activeResult=function(){return b.listResults().filter("."+c.activeItemClass).first()};b.prevResult=function(){var a=b.listResults(),d=a.index(b.activeResult())-1;a=a.eq(d);b.listResults().removeClass(c.activeItemClass);0<=d&&a.addClass(c.activeItemClass)};b.nextResult=function(){var a=b.listResults(),d=a.index(b.activeResult())+1;a=a.eq(d);b.listResults().removeClass(c.activeItemClass);0<=d&&a.addClass(c.activeItemClass)};b.selectedCallback=function(a){return function(){var d=
b.val();Swiftype.pingAutoSelection(c.engineKey,a.id,d,function(){c.onComplete(a,d)})}};b.registerResult=function(a,d){a.data("swiftype-item",d);a.click(b.selectedCallback(d)).mouseover(function(){b.listResults().removeClass(c.activeItemClass);a.addClass(c.activeItemClass)})};b.getContext=function(){return{config:c,list:h,registerResult:b.registerResult}};var t,l=!1;b.lastValue="";b.keyup(function(a){l?l=!1:36<a.which&&41>a.which||16==a.which||(0<c.typingDelay?(clearTimeout(t),t=setTimeout(function(){u(b)},
c.typingDelay)):u(b))});b.styleDropdown=function(){k.css(c.dropdownStylesFunction(b))};d(window).resize(function(a){b.styleDropdown()});b.keydown(function(a){b.styleDropdown();var d=b.activeResult();switch(a.which){case 13:0!==d.length&&h.is(":visible")?(a.preventDefault(),b.selectedCallback(d.data("swiftype-item"))()):b.currentRequest&&b.submitting();b.hideList();l=!0;break;case 38:a.preventDefault();0===d.length?b.listResults().last().addClass(c.activeItemClass):b.prevResult();break;case 40:a.preventDefault();
0===d.length?b.listResults().first().addClass(c.activeItemClass):d!=b.listResults().last()&&b.nextResult();break;case 27:b.hideList();l=!0;break;default:b.submitted=!1}});b.keypress(function(a){13==a.which&&0<b.activeResult().length&&a.preventDefault()});var m=!1,n=!1;d(document).bind("mousedown.swiftype"+ ++q,function(){m=!0});d(document).bind("mouseup.swiftype"+q,function(){m=!1;n&&(n=!1,b.hideList())});b.blur(function(){m?n=!0:b.hideList()});b.focus(function(){setTimeout(function(){b.select()},
10);0<b.listResults().length&&b.showList()})})};var w=function(a,b){a.abortCurrent();var c={},e=a.data("swiftype-config-autocomplete");c.q=b;c.engine_key=e.engineKey;c.search_fields=f(e.searchFields);c.fetch_fields=f(e.fetchFields);c.filters=f(e.filters);c.document_types=f(e.documentTypes);c.functional_boosts=f(e.functionalBoosts);c.sort_field=f(e.sortField);c.sort_direction=f(e.sortDirection);c.per_page=e.resultLimit;c.highlight_fields=e.highlightFields;a.currentRequest=d.ajax({type:"GET",dataType:"jsonp",
url:Swiftype.root_url+"/api/v1/public/engines/suggest.json",data:c}).done(function(c){var e=d.trim(b).toLowerCase();0<c.record_count?(a.cache.put(e,c.records),v(a,c.records,b)):(a.addEmpty(e),a.showNoResults())})},u=function(a){var b=a.val();if(b!==a.lastValue)if(a.lastValue=b,""===d.trim(b))a.data("swiftype-list").empty(),a.hideList();else if("undefined"!==typeof a.data("swiftype-config-autocomplete").engineKey){var c=d.trim(b).toLowerCase();a.isEmpty(c)?a.showNoResults():(c=a.cache.get(c))?v(a,
c,b):w(a,b)}},v=function(a,b,c){var d=a.data("swiftype-list"),f=a.data("swiftype-config-autocomplete");d.empty();a.hideList(!0);f.resultRenderFunction(a.getContext(),b,c);if(0<a.listResults().length&&a.focused()||void 0!==f.noResultsMessage)a.submitted?a.submitted=!1:a.showList()},f=function(a){if(void 0!==a)return"function"===typeof a&&(a=a.call()),a};g.prototype.put=function(a,b){b={key:a,value:b};this._keymap[a]=b;this.tail?(this.tail.newer=b,b.older=this.tail):this.head=b;this.tail=b;if(this.size===
this.limit)return this.shift();this.size++};g.prototype.shift=function(){var a=this.head;a&&(this.head.newer?(this.head=this.head.newer,this.head.older=void 0):this.head=void 0,a.newer=a.older=void 0,delete this._keymap[a.key]);return a};g.prototype.get=function(a,b){a=this._keymap[a];if(void 0!==a){if(a===this.tail)return a.value;a.newer&&(a===this.head&&(this.head=a.newer),a.newer.older=a.older);a.older&&(a.older.newer=a.newer);a.newer=void 0;if(a.older=this.tail)this.tail.newer=a;this.tail=a;return b?
a:a.value}};g.prototype.remove=function(a){if(a=this._keymap[a])return delete this._keymap[a.key],a.newer&&a.older?(a.older.newer=a.newer,a.newer.older=a.older):a.newer?(a.newer.older=void 0,this.head=a.newer):a.older?(a.older.newer=void 0,this.tail=a.older):this.head=this.tail=void 0,this.size--,a.value};g.prototype.clear=function(){this.head=this.tail=void 0;this.size=0;this._keymap={}};g.prototype.keys="function"===typeof Object.keys?function(){return Object.keys(this._keymap)}:function(){var a=
[],b;for(b in this._keymap)a.push(b);return a};d.fn.swiftype.defaults={activeItemClass:"active",attachTo:void 0,documentTypes:void 0,filters:void 0,engineKey:void 0,searchFields:void 0,functionalBoosts:void 0,sortField:void 0,sortDirection:void 0,fetchFields:void 0,highlightFields:void 0,noResultsClass:"noResults",noResultsMessage:void 0,onComplete:function(a,b){window.location=a.url},resultRenderFunction:function(a,b){var c=a.list,e=a.config;d.each(b,function(b,f){d.each(f,function(f,g){a.registerResult(d("\x3cli\x3e"+
e.renderFunction(b,g,f)+"\x3c/li\x3e").appendTo(c),g)})})},renderFunction:function(a,b,c){return'\x3cp class\x3d"title"\x3e'+Swiftype.htmlEscape(b.title)+"\x3c/p\x3e"},dropdownStylesFunction:function(a){var b=a.data("swiftype-config-autocomplete");a=b.attachTo?d(b.attachTo):a;var c=a.offset();c={position:"absolute","z-index":9999,top:c.top+a.outerHeight()+1,left:c.left};b.setWidth&&(c.width=a.outerWidth()-2);return c},resultLimit:void 0,suggestionListType:"ul",suggestionListClass:"autocomplete",resultListSelector:"li",
setWidth:!0,typingDelay:80,disableAutocomplete:!1,autocompleteContainingElement:"body",widgetContainerClass:"swiftype-widget"}})(jQuery);